# .github/workflows/macd-cron.yml
name: MACD Bot – Every 15 min

on:
  #schedule:
   # - cron: '1,16,31,46 * * * *'
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/${{ github.repository }}/trading-bot:latest
      env:
        TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        TELEGRAM_CHAT_ID:   ${{ secrets.TELEGRAM_CHAT_ID }}
        REDIS_URL:          ${{ secrets.REDIS_URL }}
        DELTA_API_BASE:     ${{ secrets.DELTA_API_BASE }}
        TZ: Asia/Kolkata

    steps:
      - name: Bot started – running once and exiting
        run: echo "Bot is running with CMD from Dockerfile…"
        # ← That’s literally all! Docker will execute the CMD automatically