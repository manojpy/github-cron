name: MACD Alert Bot

on:
  schedule:
    - cron: '*/15 * * * *'  # Every 15 minutes
  workflow_dispatch:  # Manual trigger

jobs:
  run-bot:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    
    - name: Run MACD Bot
      env:
        TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
      run: python macd_bot.py
    
    - name: Commit state file
      run: |
        git config --local user.email "github-actions[bot]@users.noreply.github.com"
        git config --local user.name "github-actions[bot]"
        git add -A
        git diff --quiet && git diff --staged --quiet || git commit -m "Update alert state [skip ci]"
        git push
```

### **Step 5: Add GitHub Secrets**
1. Go to **Settings** â†’ **Secrets and variables** â†’ **Actions**
2. Click **"New repository secret"**
3. Add two secrets:
   - Name: `TELEGRAM_BOT_TOKEN` â†’ Value: `your_bot_token_from_botfather`
   - Name: `TELEGRAM_CHAT_ID` â†’ Value: `your_chat_id_from_userinfobot`

### **Step 6: Test It**
1. Go to **Actions** tab
2. Click **"MACD Alert Bot"**
3. Click **"Run workflow"** â†’ **"Run workflow"**
4. Wait 30-60 seconds
5. Check your Telegram for the startup message!

---

## **That's It!** ðŸŽ‰

âœ… Bot runs every 15 minutes automatically  
âœ… Sends Telegram alerts instantly  
âœ… No need to keep anything running  
âœ… Completely free forever  
âœ… Works 24/7  

You'll get Telegram notifications like:
```
ðŸŸ¢ BTCUSD - Bullish MACD Crossover

MACD crossed above Signal line
EMA40 > EMA100 âœ“
Price: $106,770.00
Time: 2025-10-17 20:15:00
